# ü¶∑ Dental Clinic Management System# Dental Clinic Management System - Backend API

H·ªá th·ªëng qu·∫£n l√Ω ph√≤ng kh√°m nha khoa v·ªõi ph√¢n quy·ªÅn ng∆∞·ªùi d√πng, qu·∫£n l√Ω l·ªãch h·∫πn, b·ªánh nh√¢n v√† menu ƒë·ªông.## üìã M√¥ t·∫£ d·ª± √°n

---H·ªá th·ªëng qu·∫£n l√Ω ph√≤ng kh√°m nha khoa v·ªõi JWT Authentication, h·ªó tr·ª£ qu·∫£n l√Ω l·ªãch h·∫πn, b·ªánh nh√¢n, v√† ph√¢n quy·ªÅn ng∆∞·ªùi d√πng.

## üìã T√≠nh nƒÉng## üõ† C√¥ng ngh·ªá s·ª≠ d·ª•ng

### ‚úÖ ƒê√£ ho√†n thi·ªán- **Backend**: Java 21, Spring Boot 3.5.6

- **Authentication & Authorization**- **Security**: JWT (JSON Web Token)

  - ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p v·ªõi JWT- **Database**: MSSQL Server

  - Ph√¢n quy·ªÅn: Admin, Doctor, Receptionist, Viewer- **Build Tool**: Maven

  - Refresh token mechanism- **ORM**: Hibernate/JPA

- **Qu·∫£n l√Ω ng∆∞·ªùi d√πng**## üë• C√°c vai tr√≤ trong h·ªá th·ªëng

  - CRUD ng∆∞·ªùi d√πng

  - Ph√¢n quy·ªÅn ƒë·ªông- **ADMIN**: Qu·∫£n tr·ªã vi√™n - to√†n quy·ªÅn truy c·∫≠p

  - K√≠ch ho·∫°t/v√¥ hi·ªáu h√≥a t√†i kho·∫£n- **DOCTOR**: B√°c sƒ© - xem l·ªãch kh√°m, t·∫°o h·ªì s∆° kh√°m

  - Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n- **RECEPTIONIST**: L·ªÖ t√¢n - qu·∫£n l√Ω l·ªãch h·∫πn, b·ªánh nh√¢n, h√≥a ƒë∆°n

- **VIEWER**: Ng∆∞·ªùi d√πng ch·ªâ xem - role m·∫∑c ƒë·ªãnh khi ƒëƒÉng k√Ω

- **Qu·∫£n l√Ω menu ƒë·ªông**- **PATIENT**: B·ªánh nh√¢n - ch·ªâ l√† d·ªØ li·ªáu, kh√¥ng c√≥ quy·ªÅn ƒëƒÉng nh·∫≠p

  - Menu ph√¢n c·∫•p (hierarchy)

  - Ph√¢n quy·ªÅn menu theo role## üöÄ C√†i ƒë·∫∑t v√† ch·∫°y

  - CRUD menu items

  - Mobile navigation drawer### Y√™u c·∫ßu

- **Qu·∫£n l√Ω l·ªãch h·∫πn**- Java 21 tr·ªü l√™n

  - T·∫°o, xem, c·∫≠p nh·∫≠t l·ªãch h·∫πn- Maven 3.6+

  - Tr·∫°ng th√°i: Pending, Confirmed, Completed, Cancelled- **SQL Server 2019+** (Express, Developer, ho·∫∑c Standard)

  - Filter theo tr·∫°ng th√°i

### Setup Database MSSQL

- **Qu·∫£n l√Ω b·ªánh nh√¢n**

  - CRUD th√¥ng tin b·ªánh nh√¢n#### B∆∞·ªõc 1: T·∫°o Database

  - L∆∞u tr·ªØ: H·ªç t√™n, SƒêT, email, ƒë·ªãa ch·ªâ, ng√†y sinh

**C√°ch nhanh nh·∫•t:** Ch·∫°y file SQL script c√≥ s·∫µn

### üöß ƒêang ph√°t tri·ªÉn

- H·ªì s∆° b·ªánh √°n chi ti·∫øt1. M·ªü **SQL Server Management Studio (SSMS)**

- Qu·∫£n l√Ω d·ªãch v·ª• nha khoa2. Connect v√†o SQL Server (server: `localhost` ho·∫∑c `.`)

- Qu·∫£n l√Ω h√≥a ƒë∆°n3. M·ªü file `setup-database.sql` trong project

- B√°o c√°o th·ªëng k√™4. Nh·∫•n **F5** ƒë·ªÉ ch·∫°y script

- L·ªãch l√†m vi·ªác c·ªßa b√°c sƒ©

- Th√¥ng b√°o real-timeScript s·∫Ω t·ª± ƒë·ªông:

---- ‚úÖ T·∫°o database `DentalClinicDB`

- ‚úÖ T·∫°o/reset login `sa` v·ªõi password `admin123`

## üõ† C√¥ng ngh·ªá- ‚úÖ G√°n quy·ªÅn ƒë·∫ßy ƒë·ªß cho user

### Backend**Chi ti·∫øt:** Xem file [DATABASE_SETUP.md](./DATABASE_SETUP.md) ƒë·ªÉ bi·∫øt th√™m c√°ch setup chi ti·∫øt, Windows Authentication, troubleshooting, v.v.

- **Java 21**

- **Spring Boot 3.5.6**#### B∆∞·ªõc 2: Ki·ªÉm tra Connection

  - Spring Security

  - Spring Data JPASau khi ch·∫°y script, ki·ªÉm tra:

  - Spring Validation

- **JWT Authentication**```sql

- **MSSQL Server 2019+**USE DentalClinicDB;

- **Maven 3.6+**GO

### Frontend (Mobile)-- Ki·ªÉm tra database ƒë√£ t·∫°o

- **Flutter 3.x**SELECT name FROM sys.databases WHERE name = 'DentalClinicDB';

- **Dart**```

- **HTTP Client** (dio)

- **State Management** (Provider)### Ch·∫°y ·ª©ng d·ª•ng

- **Material Design 3**

```bash

---mvn spring-boot:run

```

## üöÄ C√†i ƒë·∫∑t v√† Ch·∫°y

·ª®ng d·ª•ng s·∫Ω ch·∫°y t·∫°i: **http://localhost:8080**

### Y√™u c·∫ßu

- Java JDK 21+Khi ch·∫°y l·∫ßn ƒë·∫ßu, application s·∫Ω **t·ª± ƒë·ªông**:

- Maven 3.6+

- SQL Server 2019+ (Express/Developer/Standard)- ‚úÖ T·∫°o t·∫•t c·∫£ tables (users, roles, patients, appointments, menus, v.v.)

- Flutter 3.x (cho mobile app)- ‚úÖ Insert 4 roles (ADMIN, DOCTOR, RECEPTIONIST, VIEWER)

- IDE: IntelliJ IDEA / VS Code- ‚úÖ T·∫°o admin user (username: `admin`, password: `admin123`)

- ‚úÖ T·∫°o menu ph√¢n quy·ªÅn (ch·∫°y script `insert-menus.sql` trong SSMS)

---

## üîê T√†i kho·∫£n m·∫∑c ƒë·ªãnh

### 1. Setup Database

### Admin

**B∆∞·ªõc 1:** M·ªü SQL Server Management Studio (SSMS)

- **Username**: `admin`

**B∆∞·ªõc 2:** Connect v√†o SQL Server (`localhost` ho·∫∑c `.`)- **Password**: `admin123`

**B∆∞·ªõc 3:** M·ªü v√† ch·∫°y file `database.sql` (nh·∫•n F5)### Doctor (Demo)

Script s·∫Ω t·ª± ƒë·ªông:- **Username**: `doctor1`

- ‚úÖ T·∫°o database `DentalClinicDB`- **Password**: `doctor123`

- ‚úÖ T·∫°o login `sa` / password `admin123`

- ‚úÖ G√°n quy·ªÅn ƒë·∫ßy ƒë·ªß### Receptionist (Demo)

**Ki·ªÉm tra:**- **Username**: `receptionist1`

sql- **Password**: `receptionist123`

USE DentalClinicDB;

SELECT name FROM sys.databases WHERE name = 'DentalClinicDB';## üì° API Endpoints

### Authentication

---

#### Register New Account

### 2. C·∫•u h√¨nh Backend

````
```http

**File:** `src/main/resources/application.yml`POST /api/auth/register

Content-Type: application/json

```yaml

spring:{

  datasource:  "username": "newuser",

    url: jdbc:sqlserver://localhost:1433;databaseName=DentalClinicDB;encrypt=false;trustServerCertificate=true  "password": "password123",

    username: sa  "email": "newuser@example.com",

    password: admin123  "fullName": "Nguy·ªÖn VƒÉn A",

```  "phoneNumber": "0912345678"

}

> **L∆∞u √Ω:** N·∫øu SQL Server d√πng port kh√°c, thay `1433` b·∫±ng port c·ªßa b·∫°n.```



---**Response:**



### 3. Ch·∫°y Backend```json

{

```bash  "accessToken": "eyJhbGc...",

# Build v√† ch·∫°y  "refreshToken": "eyJhbGc...",

mvn clean install  "tokenType": "Bearer",

mvn spring-boot:run  "expiresIn": 86400,

  "user": {

# Ho·∫∑c d√πng script c√≥ s·∫µn (Windows)    "id": 4,

.\run-api.bat    "username": "newuser",

```    "email": "newuser@example.com",

    "fullName": "Nguy·ªÖn VƒÉn A",

**Backend s·∫Ω ch·∫°y t·∫°i:** http://localhost:8080    "roles": ["ROLE_VIEWER"]

  }

**L·∫ßn ch·∫°y ƒë·∫ßu ti√™n, application t·ª± ƒë·ªông:**}

- ‚úÖ T·∫°o t·∫•t c·∫£ tables (Hibernate auto-ddl)```

- ‚úÖ Insert 5 roles (ADMIN, DOCTOR, RECEPTIONIST, VIEWER, PENDING_USER)

- ‚úÖ T·∫°o admin user (username: `admin`, password: `admin123`)> **L∆∞u √Ω**: Ng∆∞·ªùi d√πng ƒëƒÉng k√Ω m·ªõi m·∫∑c ƒë·ªãnh ƒë∆∞·ª£c g√°n role **ROLE_VIEWER** (ch·ªâ c√≥ quy·ªÅn xem). Admin c√≥ th·ªÉ n√¢ng c·∫•p quy·ªÅn sau.

- ‚úÖ T·∫°o menu ph√¢n quy·ªÅn

#### Login

---

```http

### 4. Ch·∫°y Mobile AppPOST /api/auth/login

Content-Type: application/json

```bash

# Di chuy·ªÉn v√†o th∆∞ m·ª•c mobile{

cd mobile  "username": "admin",

  "password": "admin123"

# C√†i ƒë·∫∑t dependencies}

flutter pub get```



# Ch·∫°y app (Android Emulator ho·∫∑c iOS Simulator)**Response:**

flutter run

```json

# Ho·∫∑c ch·∫°y tr√™n device c·ª• th·ªÉ{

flutter run -d <device_id>  "accessToken": "eyJhbGc...",

```  "refreshToken": "eyJhbGc...",

  "tokenType": "Bearer",

**C·∫•u h√¨nh API Endpoint:**  "expiresIn": 86400,

  "user": {

File: `mobile/lib/src/core/services/menu_service.dart`    "id": 1,

```dart    "username": "admin",

static const String _baseUrl = 'http://10.0.2.2:8080/api'; // Android Emulator    "email": "admin@dentalclinic.com",

// Ho·∫∑c 'http://localhost:8080/api' cho iOS Simulator    "fullName": "Administrator",

```    "roles": ["ROLE_ADMIN"]

  }

---}

````

## üîê T√†i kho·∫£n m·∫∑c ƒë·ªãnh

#### Refresh Token

| Username | Password | Role | M√¥ t·∫£ |

|----------|----------|------|-------|```http

| `admin` | `admin123` | ADMIN | Qu·∫£n tr·ªã vi√™n (full quy·ªÅn) |POST /api/auth/refresh

| `doctor1` | `doctor123` | DOCTOR | B√°c sƒ© (xem demo) |Content-Type: application/json

| `receptionist1` | `receptionist123` | RECEPTIONIST | L·ªÖ t√¢n (xem demo) |

{

--- "refreshToken": "eyJhbGc..."

}

## üì° API Endpoints```

### Authentication#### Test Authentication

````

POST   /api/auth/register   - ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi```http

POST   /api/auth/login      - ƒêƒÉng nh·∫≠pGET /api/auth/me

POST   /api/auth/refresh    - Refresh tokenAuthorization: Bearer {accessToken}

````

### Users### User Management (ADMIN only)

````

GET    /api/users           - L·∫•y danh s√°ch users (Admin)#### Get All Users

GET    /api/users/{id}      - Chi ti·∫øt user

POST   /api/users           - T·∫°o user m·ªõi (Admin)```http

PUT    /api/users/{id}      - C·∫≠p nh·∫≠t userGET /api/users

DELETE /api/users/{id}      - X√≥a user (Admin)Authorization: Bearer {accessToken}

PUT    /api/users/{id}/status - K√≠ch ho·∫°t/v√¥ hi·ªáu h√≥a```

````

#### Get All Doctors (ADMIN, RECEPTIONIST)

### Menus

```````http

GET    /api/menus                    - Menu c·ªßa user (c√≥ ph√¢n quy·ªÅn)GET /api/users/doctors

GET    /api/menus/all-for-management - T·∫•t c·∫£ menu (Admin)Authorization: Bearer {accessToken}

POST   /api/menus                    - T·∫°o menu m·ªõi (Admin)```

PUT    /api/menus/{id}               - C·∫≠p nh·∫≠t menu (Admin)

PUT    /api/menus/{id}/roles         - C·∫≠p nh·∫≠t roles cho menu (Admin)#### Get User by ID

DELETE /api/menus/{id}               - X√≥a menu (Admin)

``````http

GET /api/users/{id}

### RolesAuthorization: Bearer {accessToken}

```````

GET /api/roles - T·∫•t c·∫£ roles v·ªõi metadata

GET /api/roles/names - Ch·ªâ t√™n roles (List<String>)#### Create User

GET /api/roles/{id} - Chi ti·∫øt role

````http

POST /api/users

### PatientsAuthorization: Bearer {accessToken}

```Content-Type: application/json

GET    /api/patients     - Danh s√°ch b·ªánh nh√¢n

GET    /api/patients/{id} - Chi ti·∫øt b·ªánh nh√¢n{

POST   /api/patients     - Th√™m b·ªánh nh√¢n m·ªõi  "username": "doctor2",

PUT    /api/patients/{id} - C·∫≠p nh·∫≠t th√¥ng tin  "password": "password123",

DELETE /api/patients/{id} - X√≥a b·ªánh nh√¢n  "email": "doctor2@dentalclinic.com",

```  "fullName": "B√°c sƒ© Tr·∫ßn VƒÉn B",

  "phoneNumber": "0987654321",

### Appointments  "roleNames": ["ROLE_DOCTOR"],

```  "active": true

GET    /api/appointments              - Danh s√°ch l·ªãch h·∫πn}

GET    /api/appointments/{id}         - Chi ti·∫øt l·ªãch h·∫πn```

POST   /api/appointments              - T·∫°o l·ªãch h·∫πn m·ªõi

PUT    /api/appointments/{id}         - C·∫≠p nh·∫≠t l·ªãch h·∫πn#### Update User

PUT    /api/appointments/{id}/status  - C·∫≠p nh·∫≠t tr·∫°ng th√°i

DELETE /api/appointments/{id}         - H·ªßy l·ªãch h·∫πn```http

```PUT /api/users/{id}

Authorization: Bearer {accessToken}

**Authentication:** T·∫•t c·∫£ endpoints y√™u c·∫ßu `Authorization: Bearer <token>` (tr·ª´ register/login)Content-Type: application/json



---{

  "username": "doctor2",

## üìÇ C·∫•u tr√∫c th∆∞ m·ª•c  "email": "doctor2@dentalclinic.com",

  "fullName": "B√°c sƒ© Tr·∫ßn VƒÉn B Updated",

```  "phoneNumber": "0987654321",

Mobile-DentalClinic-Management/  "roleNames": ["ROLE_DOCTOR", "ROLE_ADMIN"],

‚îú‚îÄ‚îÄ src/                             # Backend Spring Boot source code  "active": true

‚îÇ   ‚îú‚îÄ‚îÄ main/}

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/.../dentalclinic_api/```

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/             # Configuration, Security

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/         # REST Controllers#### Delete User

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/                # Data Transfer Objects

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entity/             # JPA Entities```http

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enums/              # EnumerationsDELETE /api/users/{id}

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exception/          # Exception HandlersAuthorization: Bearer {accessToken}

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/         # JPA Repositories```

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security/           # JWT, UserDetails

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service/            # Business Logic#### Assign Roles to User

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resources/

‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ application.yml     # Configuration```http

‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ logback-spring.xml  # Logging configPUT /api/users/{id}/roles

‚îÇ   ‚îî‚îÄ‚îÄ test/                       # Unit testsAuthorization: Bearer {accessToken}

‚îÇContent-Type: application/json

‚îú‚îÄ‚îÄ mobile/                          # Flutter Mobile App

‚îÇ   ‚îú‚îÄ‚îÄ lib/["ROLE_DOCTOR", "ROLE_ADMIN"]

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.dart               # Entry point```

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/

‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ core/## üìä Database Schema

‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ models/         # Data models

‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ services/       # API services### Tables

‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ screens/            # UI screens

‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ admin/          # Admin screens- **users**: Th√¥ng tin ng∆∞·ªùi d√πng (ADMIN, DOCTOR, RECEPTIONIST)

‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ auth/           # Login, Register- **roles**: C√°c vai tr√≤ trong h·ªá th·ªëng

‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ widgets/            # Reusable widgets- **user_roles**: B·∫£ng li√™n k·∫øt nhi·ªÅu-nhi·ªÅu gi·ªØa users v√† roles

‚îÇ   ‚îú‚îÄ‚îÄ pubspec.yaml                # Flutter dependencies- **patients**: Th√¥ng tin b·ªánh nh√¢n (kh√¥ng c√≥ quy·ªÅn ƒëƒÉng nh·∫≠p)

‚îÇ   ‚îî‚îÄ‚îÄ android/ ios/ web/          # Platform-specific- **appointments**: L·ªãch h·∫πn kh√°m

‚îÇ

‚îú‚îÄ‚îÄ database.sql                     # Database setup script### Entity Relationships

‚îú‚îÄ‚îÄ pom.xml                          # Maven configuration

‚îú‚îÄ‚îÄ README.md                        # This file```

‚îú‚îÄ‚îÄ .gitignore                       # Git ignore rulesUser (1) ----< (N) User_Roles (N) >---- (1) Role

‚îî‚îÄ‚îÄ Dental_Clinic_API.postman_collection.json  # API testsUser (1) ----< (N) Appointments (Doctor)

```User (1) ----< (N) Patients (Created By)

Patient (1) ----< (N) Appointments

---```



## üß™ Testing## üîí JWT Configuration



### Backend API v·ªõi Postman### C·∫•u h√¨nh trong application.yml



1. Import file `Dental_Clinic_API.postman_collection.json` v√†o Postman```yaml

2. ƒêƒÉng nh·∫≠p ƒë·ªÉ l·∫•y JWT tokenjwt:

3. Set token v√†o environment variable  secret: MyVerySecureSecretKeyForDentalClinicManagementSystemAtLeast256BitsLong12345

4. Test c√°c endpoints  expiration: 86400000 # 24 hours

  refresh-expiration: 604800000 # 7 days

### Mobile App```



```bash### S·ª≠ d·ª•ng JWT Token

# Run tests

cd mobileT·∫•t c·∫£ c√°c endpoints (tr·ª´ `/api/auth/**`) y√™u c·∫ßu JWT token trong header:

flutter test

```

# Run integration testsAuthorization: Bearer {your-jwt-token}

flutter test integration_test```

```

## ‚öôÔ∏è Business Rules

---

### L·ªãch h·∫πn (Appointments)

## üì¶ Build Production

- M·ªói l·ªãch h·∫πn m·∫∑c ƒë·ªãnh 30 ph√∫t

### Backend- Ki·ªÉm tra tr√πng gi·ªù b√°c sƒ© khi ƒë·∫∑t l·ªãch

- B·ªánh nh√¢n ph·∫£i ho√†n th√†nh l·ªãch c≈© m·ªõi ƒë·∫∑t ti·∫øp

```bash- B√°c sƒ©/L·ªÖ t√¢n c√≥ th·ªÉ k·∫øt th√∫c l·ªãch h·∫πn s·ªõm

mvn clean package -DskipTests

### B·ªánh nh√¢n (Patients)

# JAR file s·∫Ω ƒë∆∞·ª£c t·∫°o trong target/

java -jar target/dentalclinic-api-1.0.0.jar- Kh√¥ng c√≥ quy·ªÅn ƒëƒÉng nh·∫≠p

```- ƒê∆∞·ª£c t·∫°o b·ªüi RECEPTIONIST ho·∫∑c ADMIN

- L∆∞u tr·ªØ th√¥ng tin y t·∫ø, d·ªã ·ª©ng, ti·ªÅn s·ª≠ b·ªánh

### Mobile

### Ph√¢n quy·ªÅn

```bash

cd mobile- User c√≥ th·ªÉ c√≥ nhi·ªÅu roles

- M·ªói endpoint c√≥ y√™u c·∫ßu role ri√™ng

# Android APK- S·ª≠ d·ª•ng `@PreAuthorize` ƒë·ªÉ ki·ªÉm tra quy·ªÅn

flutter build apk --release

## üß™ Testing v·ªõi cURL

# Android App Bundle

flutter build appbundle --release### 1. Login



# iOS```bash

flutter build ios --releasecurl -X POST http://localhost:8080/api/auth/login \

```  -H "Content-Type: application/json" \

  -d '{"username":"admin","password":"admin123"}'

---```



## üêõ Troubleshooting### 2. Get All Users (v·ªõi token)



### Backend kh√¥ng connect ƒë∆∞·ª£c database```bash

```curl -X GET http://localhost:8080/api/users \

‚úó Error: Login failed for user 'sa'  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

````

**Fix:**

1. Ki·ªÉm tra SQL Server ƒëang ch·∫°y### 3. Create New Doctor

2. Verify username/password trong `application.yml`

3. Ki·ªÉm tra SQL Server Authentication mode (ph·∫£i enable SQL Server Authentication)```bash

curl -X POST http://localhost:8080/api/users \

### Mobile kh√¥ng g·ªçi ƒë∆∞·ª£c API -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \

````-H "Content-Type: application/json" \

‚úó Error: Connection refused  -d '{

```    "username": "doctor3",

**Fix:**    "password": "password123",

- Android Emulator: D√πng `http://10.0.2.2:8080`    "email": "doctor3@dentalclinic.com",

- iOS Simulator: D√πng `http://localhost:8080`    "fullName": "B√°c sƒ© Nguy·ªÖn C",

- Real device: D√πng IP th·∫≠t c·ªßa m√°y (VD: `http://192.168.1.100:8080`)    "roleNames": ["ROLE_DOCTOR"],

    "active": true

### Port 8080 b·ªã chi·∫øm  }'

**Fix:** Thay ƒë·ªïi port trong `application.yml`:```

```yaml

server:## üîß Troubleshooting

  port: 8081

```### ‚ùå L·ªói: "Cannot connect to SQL Server"



---**Nguy√™n nh√¢n:** SQL Server kh√¥ng ch·∫°y ho·∫∑c TCP/IP ch∆∞a b·∫≠t



## üìù License**Gi·∫£i ph√°p:**



This project is licensed under the MIT License.1. Ki·ªÉm tra SQL Server service ƒëang ch·∫°y:



---   - M·ªü **Services** (Win + R ‚Üí `services.msc`)

   - T√¨m "SQL Server" ‚Üí ph·∫£i ·ªü tr·∫°ng th√°i "Running"

## üë• Team

2. B·∫≠t TCP/IP trong SQL Server Configuration Manager:

**ƒê·ªì √°n m√¥n L·∫≠p tr√¨nh Mobile**

- Backend: Spring Boot + MSSQL   - M·ªü **SQL Server Configuration Manager**

- Frontend: Flutter   - SQL Server Network Configuration ‚Üí Protocols for [Instance]

- University: [T√™n tr∆∞·ªùng]   - TCP/IP ‚Üí Right-click ‚Üí Enable

- Year: 2025   - Restart SQL Server service



---3. Check port 1433 trong Windows Firewall:

   ```bash

## üìû Contact   netstat -an | findstr 1433

````

- **Email:** your.email@example.com

- **GitHub:** https://github.com/iLuminase/Mobile-DentalClinic-Management### ‚ùå L·ªói: "Login failed for user 'sa'"

---**Nguy√™n nh√¢n:** SQL Authentication ch∆∞a b·∫≠t ho·∫∑c password sai

## üìå Version**Gi·∫£i ph√°p:**

**Current Version:** 1.0.01. B·∫≠t SQL Server Authentication:

### Changelog - M·ªü SSMS ‚Üí Connect v√†o server

- Right-click v√†o Server ‚Üí Properties

#### v1.0.0 (2025-10-28) - Security ‚Üí ch·ªçn "SQL Server and Windows Authentication mode"

- ‚úÖ JWT Authentication & Authorization - Restart SQL Server service

- ‚úÖ User Management (CRUD + Role assignment)

- ‚úÖ Dynamic Menu Management v·ªõi ph√¢n quy·ªÅn2. Reset password cho 'sa':

- ‚úÖ Patient Management - Ch·∫°y l·∫°i file `setup-database.sql`

- ‚úÖ Appointment Management - Ho·∫∑c ch·∫°y manual:

- ‚úÖ Mobile App v·ªõi Navigation Drawer ```sql

- ‚úÖ API Documentation ALTER LOGIN sa WITH PASSWORD = 'admin123';

- ‚úÖ Database setup script ALTER LOGIN sa ENABLE;

  ```

  ```

---

### ‚ùå L·ªói: "Cannot open database 'DentalClinicDB'"

**Happy Coding! üöÄ**

**Nguy√™n nh√¢n:** Database ch∆∞a ƒë∆∞·ª£c t·∫°o

**Gi·∫£i ph√°p:**

1. Ch·∫°y file `setup-database.sql` trong SSMS
2. Ho·∫∑c t·∫°o manual:
   ```sql
   CREATE DATABASE DentalClinicDB;
   ```

### ‚ùå L·ªói: "Table 'users' doesn't exist"

**Nguy√™n nh√¢n:** Application ch∆∞a t·ª± ƒë·ªông t·∫°o tables

**Gi·∫£i ph√°p:**

1. Ki·ªÉm tra `ddl-auto` trong `application.yml`:

   ```yaml
   jpa:
     hibernate:
       ddl-auto: update # Ph·∫£i l√† 'update' ho·∫∑c 'create'
   ```

2. Restart application

3. Check logs ƒë·ªÉ xem l·ªói chi ti·∫øt

### ‚ùå L·ªói: "HikariPool - Connection is not available"

**Nguy√™n nh√¢n:** Connection pool h·∫øt k·∫øt n·ªëi

**Gi·∫£i ph√°p:**

1. TƒÉng connection pool size trong `application-prod.yml`:

   ```yaml
   datasource:
     hikari:
       maximum-pool-size: 20
       minimum-idle: 10
   ```

2. Check c√≥ connection leaks kh√¥ng (kh√¥ng close connection sau khi d√πng)

### üí° Tips

- **Check application logs:** Lu√¥n xem logs khi c√≥ l·ªói
- **Verify connection:** D√πng SSMS ƒë·ªÉ test connection tr∆∞·ªõc
- **Check credentials:** Username/password trong `application.yml` ph·∫£i kh·ªõp v·ªõi SQL Server

## üìö T√†i li·ªáu tham kh·∫£o

- [DATABASE_SETUP.md](./DATABASE_SETUP.md) - H∆∞·ªõng d·∫´n chi ti·∫øt setup MSSQL
- [setup-database.sql](./setup-database.sql) - SQL script t·ª± ƒë·ªông setup database

## üìù Next Steps (Phase 2-4)

### Phase 2: Patient & Appointment Management

- [ ] CRUD APIs cho Patient
- [ ] CRUD APIs cho Appointment
- [ ] Business logic: check tr√πng gi·ªù b√°c sƒ©
- [ ] Business logic: check b·ªánh nh√¢n ho√†n th√†nh l·ªãch c≈©

### Phase 3: Medical Records & Services

- [ ] Entity v√† APIs cho Medical Records
- [ ] Entity v√† APIs cho Services (d·ªãch v·ª• nha khoa)
- [ ] T·ª± ƒë·ªông t·∫°o Medical Record khi appointment COMPLETED

### Phase 4: Invoices & Payments

- [ ] Entity v√† APIs cho Invoices
- [ ] H·ªó tr·ª£ thanh to√°n m·ªôt ph·∫ßn
- [ ] T·ª± ƒë·ªông t·∫°o invoice sau appointment

## üìÑ License

MIT License

## üë®‚Äçüíª Author

Dental Clinic Management Team
